<!DOCTYPE html>
<html>

<head>
    <title>How to Nature</title>
    <link href="theme.css" rel="stylesheet" />
    <link href="sorting.css" rel="stylesheet" />
    <script type="text/javascript">
        window.onload = function () {
            var date = new Date();
            var day = ['Sun', 'Mon', 'Tues', 'Wednes', 'Thurs', 'Fri', 'Satur'];
            switch (date.getDay()) {
                case 0:
                    document.getElementById("navbarSupportedContent").innerHTML = day[date.getDay()] + 'day is the day to discharge general waste. (8:00 PM - 2:00 AM)';
                    break;
                case 1:
                    document.getElementById("navbarSupportedContent").innerHTML = day[date.getDay()] + 'day is the day to discharge general waste, recyclables, and food waste. (8:00 PM - 2:00 AM)';
                    break;
                case 2:
                    document.getElementById("navbarSupportedContent").innerHTML = day[date.getDay()] + 'day is the day to discharge general waste. (8:00 PM - 2:00 AM)';
                    break;
                case 3:
                    document.getElementById("navbarSupportedContent").innerHTML = day[date.getDay()] + 'day is the day to discharge general waste, recyclables, and food waste. (8:00 PM - 2:00 AM)';
                    break;
                case 4:
                    document.getElementById("navbarSupportedContent").innerHTML = day[date.getDay()] + 'day is the day to discharge general waste. (8:00 PM - 2:00 AM)';
                    break;
                case 5:
                    document.getElementById("navbarSupportedContent").innerHTML = day[date.getDay()] + 'day is the day to discharge general waste, recyclables, and food waste. (8:00 PM - 2:00 AM)';
                    break;
                case 6:
                    document.getElementById("navbarSupportedContent").innerHTML = day[date.getDay()] + 'day is not the day to discharge waste!';
                    break;
                default:
                    document.getElementById("navbarSupportedContent").innerHTML = '';
            }


            var bridge = new WebOSServiceBridge();
            var bridge2 = new WebOSServiceBridge();

            var url = 'luna://com.domain.app.service/readFile';
            var params = '{"path":"result.txt"}';

            function callback(msg) {
                var arg = JSON.parse(msg);
                if (arg.returnValue) {
                    document.getElementById("result_txt").innerHTML=arg.fileData;
                }
                var result=arg.fileData;
                if(result=="trash"){
                    document.getElementById("result_img").innerHTML="trash";
                }
                else if(result=="glass"){
                    document.getElementById("result_img").innerHTML="glass";
                }
                else if(result=="plastic"){
                    document.getElementById("result_img").innerHTML="plastic";
                }
                else if(result=="metal"){
                    document.getElementById("result_img").innerHTML="metal";
                }
                else if(result=="paper"){
                    document.getElementById("result_img").innerHTML="paper";
                }
            }

            document.getElementById('resultBtn').onclick = function () {
                bridge.onservicecallback = readImgcallback;
                bridge.call(readImgurl, readImgparams);

                bridge2.onservicecallback = callback;
                bridge2.call(url, params);
            };

            var readImgurl = 'luna://com.domain.app.service/readImgFile';
            var readImgparams = '{"path":"test.jpg"}';

            function readImgcallback(msg) {
                var arg = JSON.parse(msg);
                if (arg.returnValue) {
                    document.getElementById("inputImg").src="data:image/png;base64,"+arg.fileData;
                }
            }

        }
    </script>
</head>

<body>
    <main class="main" id="top">
        <nav class="navbar navbar-expand-lg navbar-light fixed-top py-3" data-navbar-on-scroll="data-navbar-on-scroll">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <img src="img/icons/logo.jpg" alt="" width="30" />
                    <span class="text-1000 fs-1 ms-2 fw-medium">HowTo<span class="fw-bold">Nature</span></span>
                </a>
                <div class="collapse navbar-collapse" id="navbarSupportedContent"></div>
                <!-- <div><a class="navbar-brand" href="exactsorting.html"></a><img src="img/icons/recycle.jpg" alt=""width="30"/>
                    <span class="text-1000 fs-1 ms-2 fw-medium">Exact waste sorting</span></a>
                </div> -->
                <div class="dropdown">
                    <button class="dropbtn"><img src="img/icons/recycle.jpg" alt="" width="30" /> <span
                            class="text-1000 fs-1 ms-2 fw-medium">Exact waste sorting</span></button>
                    <div class="dropdown-content">
                        <a href="trash.html">Trash</a>
                        <a href="plastic.html">Plastic</a>
                        <a href="glass.html">Glass</a>
                        <a href="metal.html">Metal</a>
                        <a href="paper.html">Paper</a>
                    </div>
                </div>
            </div>
        </nav>

        <section class="pb-6" style="overflow:scroll; height:1000px">
            <div class="container">
                <div>
                    <button id="resultBtn" class="btn btn-lg btn-danger">Result</button>
                </div>
                <image id="inputImg" src="img/default_img.png" width="50%" height="700px"></image>
                <div id="resultDiv">
                    <div id="result_txt"></div>
                    <p/>
                    <div id="result_img"></div>
                </div>
            </div>
        </section>
    </main>
</body>

</html>